"use strict";var _functions=require("../functions.js");function buscaUser(t,n){var r,a,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:t,nivel:n},e.next=3,regeneratorRuntime.awrap((0,_functions.token)());case 3:a=e.sent,o=JSON.stringify(r),$.ajax({url:"api/BuscarUser ",type:"POST",dataType:"json",data:o,headers:{Authorization:"Bearer "+a,"X-CSRF-TOKEN":(0,_functions.pushToken)(),"Content-Type":"application/json",Accept:"application/json"},success:function(e){2==e.Status?montarDados(e.data):alert(e.message)},error:function(e,t,n){console.log(e),console.error("Erro ao enviar:",n)}});case 6:case"end":return e.stop()}})}function montarDados(e){$.each(e,function(e,t){console.log(t.idUserRecruiter),$("#nome-Completo-recrutador-edit").val(t.name),$("#nome-empresa-edit").val(t.nome_empresa),$("#email-Input-Recrutador-edit").val(t.email),$("#telefone-Input-Recrutador-edit").val(t.phone)})}document.addEventListener("click",function(e){var t;e.target.classList.contains("btn-primary")&&(t=document.getElementById("nivel-user").dataset.nivel,buscaUser($("#id-user").val(),t))});var formRecrutador=document.getElementById("form-edit-perfil");function SubmitEdit(){var t,n,r,a,o,i,s,c,u,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$("#nome-Completo-recrutador-edit").val(),o=$("#nome-empresa-edit").val(),n=$("#email-Input-Recrutador-edit").val(),r=$("#telefone-Input-Recrutador-edit").val(),i=$("#id-user").val(),s=(0,_functions.validacamposRecrutador)(t,n,r,a,o),(0,_functions.ErrorRecrudador)(s),c={nome:t,email:n,phone:r,password:a,nameEmpresa:o,id:i},u=JSON.stringify(c),e.next=11,regeneratorRuntime.awrap((0,_functions.token)());case 11:d=e.sent,console.log(u),$.ajax({url:"api/EditUser ",type:"POST",dataType:"json",data:u,headers:{Authorization:"Bearer "+d,"X-CSRF-TOKEN":(0,_functions.pushToken)(),"Content-Type":"application/json",Accept:"application/json"},success:function(e){2==e.Status?console.log(e,"foi atualizado"):alert(e.message)},error:function(e,t,n){console.log(e),console.error("Erro ao enviar:",n)}});case 14:case"end":return e.stop()}})}formRecrutador.addEventListener("submit",function(e){e.preventDefault(),SubmitEdit()}),document.getElementById("telefone-Input-Recrutador-edit").addEventListener("input",function(){var e=formatarTelefone(this),t=document.getElementById("erroTel");e?(t.innerHTML="",this.classList.remove("is-invalid")):(t.innerHTML="Verifique o Telefone informado",this.classList.add("is-invalid"))}),document.getElementById("email-Input-Recrutador-edit").addEventListener("input",function(){var e=document.getElementById("erroTel");mascaraEmail(this.value)?(e.innerHTML="",this.classList.remove("is-invalid")):(e.innerHTML="Verifique o endere√ßo informado",this.classList.add("is-invalid"))});